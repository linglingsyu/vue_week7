import{d as n,a as s,A as i}from"./index-020ac884.js";const l=n("productStore",{state:()=>({productList:[],Loading:!1,productById:[]}),getters:{isLoading:({Loading:t})=>t,products:({productList:t})=>t,product:({productById:t})=>t},actions:{async getProductList(){try{this.Loading=!0;const t=`api/${s}/products/all`,a=await i.get(t);this.productList=a.data.products,this.Loading=!1}catch(t){this.Loading=!1,console.dir(t),alert("error!")}},async getProductById(t){try{this.Loading=!0;const a=`/api/${s}/product/${t}`,r=await i.get(a);console.log(r),this.productById=r.data.product}catch(a){console.dir(a),alert("error!")}finally{this.Loading=!1}},async updateProduct(t,a){var r;try{this.Loading=!0;let o=`api/${s}/admin/product`,e="post";t==="edit"&&(o+="/"+a.id,e="put",delete a.id);const d=await i[e](o,{data:a});return await this.getProductList(),this.Loading=!1,d}catch(o){if(console.dir(o),this.Loading=!1,(r=o==null?void 0:o.response)!=null&&r.data){let e="";for(const d of o.response.data.message)e+=d+`
`;alert(e)}}},async delProduct(t){try{this.Loading=!0;const a=`/api/${s}/admin/product/${t}`,r=await i.delete(a);return delete this.productList[t],r}catch(a){console.dir(a),alert("error!")}finally{this.Loading=!1}},async upload(t){try{this.Loading=!0;const a=`/api/${s}/admin/upload`;return await i.post(a,t,{headers:{"Content-Type":"multipart/form-data"}})}catch(a){console.dir(a),alert("upload fail!")}finally{this.Loading=!1}}}});export{l as p};
