import{_ as g,l as v,n as F,E as S,m as w,h as y,i,o as c,c as m,b as s,j as e,F as h,r as x,t as o,k as C,w as L,v as E}from"./index-020ac884.js";import{C as b}from"./CartStore-d9c88d19.js";const q={data(){return{message:"",simpleSchema:{email:"required|email",name:"required",address:"required",tel:"required"}}},mounted(){this.getCartList()},components:{vForm:v,Field:F,ErrorMessage:S},methods:{...w(b,["getCartList","addOrder"]),async onSubmit(t,{resetForm:l}){if(this.carts.length===0)return!1;const _={user:t,message:this.message};await this.addOrder(_),l()}},computed:{...y(b,["isLoading","carts"]),total(){return this.carts.reduce((t,l)=>(t+=l.final_total,t),0)}},watch:{}},k=s("h1",null,"this is cart page",-1),M={class:"vl-parent"},V={class:"table-responsive"},B={class:"table"},j=s("thead",null,[s("tr",null,[s("th",null,"品名"),s("th",null,"數量"),s("th",null,"單價"),s("th",null,"小計")])],-1),D=s("td",{colspan:"3"},"總計",-1),N={class:"my-5 row justify-content-center"},O={class:"mb-3"},A=s("label",{for:"email",class:"form-label"},"Email",-1),T={class:"mb-3"},U=s("label",{for:"name",class:"form-label"},"收件人姓名",-1),z={class:"mb-3"},G=s("label",{for:"tel",class:"form-label"},"收件人電話",-1),H={class:"mb-3"},I=s("label",{for:"address",class:"form-label"},"收件人地址",-1),J={class:"mb-3"},K=s("label",{for:"message",class:"form-label"},"留言",-1),P=["disabled"];function Q(t,l,_,R,d,u){const f=i("isLoading"),n=i("Field"),r=i("ErrorMessage"),p=i("vForm");return c(),m(h,null,[k,s("div",M,[e(f,{active:t.isLoading},null,8,["active"]),s("div",V,[s("table",B,[j,s("tbody",null,[(c(!0),m(h,null,x(t.carts,a=>(c(),m("tr",{key:a.id},[s("th",null,o(a.product.title),1),s("td",null,o(a.qty),1),s("td",null,o(a.product.price),1),s("td",null,o(a.final_total),1)]))),128)),s("tr",null,[D,s("td",null,o(u.total),1)])])])]),s("div",N,[e(p,{"validation-schema":d.simpleSchema,onSubmit:u.onSubmit},{default:C(()=>[s("div",O,[A,e(n,{id:"email",name:"email",class:"form-control"}),e(r,{class:"text-danger",name:"email"})]),s("div",T,[U,e(n,{id:"name",name:"name",class:"form-control"}),e(r,{class:"text-danger",name:"name"})]),s("div",z,[G,e(n,{id:"tel",name:"tel",class:"form-control"}),e(r,{class:"text-danger",name:"tel"})]),s("div",H,[I,e(n,{id:"address",name:"address",class:"form-control"}),e(r,{class:"text-danger",name:"address"})]),s("div",J,[K,L(s("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":l[0]||(l[0]=a=>d.message=a)},null,512),[[E,d.message]])]),s("button",{disabled:!t.carts.length,type:"submit",class:"btn btn-danger"}," 送出訂單 ",8,P)]),_:1},8,["validation-schema","onSubmit"])])])],64)}const Y=g(q,[["render",Q]]);export{Y as default};
